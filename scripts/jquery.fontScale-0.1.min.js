$.fn.fontScale=function(t,a,e){$.fn.fontScale.fakeEl||($.fn.fontScale.fakeEl=$("<span>").appendTo(document.body));var f=t||this.val()||this.text();f=(f=$.fn.fontScale.fakeEl.text(f).html()).replace(/\s/g,"&nbsp;"),$.fn.fontScale.fakeEl.html(f).css("font",a||this.css("font"));var n=$.fn.fontScale.fakeEl.width()/parseFloat(this.width());if((e=e||this.data("maxlines")||3)>1&&(e-=.5),n>e){var s=parseFloat(this.css("font-size").replace("px",""));s=s*(.9*e/n)+"px",this.css("font-size",s)}$.fn.fontScale.fakeEl.hide()};